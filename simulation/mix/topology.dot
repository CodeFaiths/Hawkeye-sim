digraph HawkeyeTopology {
    rankdir=TB;                 // Top (switches) to Bottom (hosts)
    splines=false;              // Use straight line segments, no curves
    fontname="Helvetica";
    fontsize=12;

    node [shape=circle, style=filled, fillcolor="#f4f6fb", fontname="Helvetica"];
    // 默认边样式（颜色按带宽单独指定）
    edge [color="#4a5568", fontname="Helvetica", fontsize=10];

    // Switches at the top
    subgraph cluster_switches {
        label="Switch Layer";
        labelloc="t";
        color="#a0aec0";
        style="rounded,dashed";
        rank=same;
        S9  [label="S9\n(Core)", shape=box, fillcolor="#bee3f8"];
        S10 [label="S10\n(Core)", shape=box, fillcolor="#bee3f8"];
        S11 [label="S11\n(Agg)",  shape=box, fillcolor="#bee3f8"];
        S12 [label="S12\n(Agg)",  shape=box, fillcolor="#bee3f8"];
    }

    // Hosts at the bottom
    subgraph cluster_hosts {
        label="Host Layer";
        labelloc="b";
        color="#cbd5e0";
        style="rounded";
        H0  [label="H0"];
        H1  [label="H1"];
        H2  [label="H2"];
        H3  [label="H3"];
        H4  [label="H4"];
        H5  [label="H5"];
        H6  [label="H6"];
        H7  [label="H7"];
        H8  [label="H8"];
        H13 [label="H13"];
    }

    // Explicitly enforce vertical order: switches at top, hosts at bottom
    {rank=min;  S9; S10; S11; S12;}
    {rank=max;  H0; H1; H2; H3; H4; H5; H6; H7; H8; H13;}

    // 50G 链路：蓝色（物理链路，方向无关）
    H1  -> S9  [dir=none, color="#3182ce", label="50G\n0.003 ms"];
    H2  -> S9  [dir=none, color="#3182ce", label="50G\n0.003 ms"];
    H4  -> S11 [dir=none, color="#3182ce", label="50G\n0.003 ms"];
    H0  -> S12 [dir=none, color="#3182ce", label="50G\n0.003 ms"];

    // 100G 链路：橙色，加粗（物理链路，方向无关）
    S9  -> S10 [dir=none, color="#dd6b20", penwidth=1.6, label="100G\n0.003 ms"];
    S10 -> S11 [dir=none, color="#dd6b20", penwidth=1.6, label="100G\n0.003 ms"];
    S10 -> S12 [dir=none, color="#dd6b20", penwidth=1.6, label="100G\n0.005 ms"];
    H3  -> S12 [dir=none, color="#dd6b20", label="100G\n0.003 ms"];
    H5  -> S12 [dir=none, color="#dd6b20", label="100G\n0.003 ms"];
    H6  -> S12 [dir=none, color="#dd6b20", label="100G\n0.003 ms"];
    H7  -> S12 [dir=none, color="#dd6b20", label="100G\n0.003 ms"];
    H8  -> S12 [dir=none, color="#dd6b20", label="100G\n0.003 ms"];
    H13 -> S10 [dir=none, color="#dd6b20", label="100G\n0.008 ms"];

    // =========================
    // Flow paths (F1–F6)
    // 每条流用不同颜色和编号表示走向，只用于标示，不影响布局
    // =========================

    // F1: 1 -> 3, path 1 -> 9 -> 10 -> 12 -> 3
    H1  -> S9  [color="#e53e3e", penwidth=2.4, constraint=false, label="F1"];
    S9  -> S10 [color="#e53e3e", penwidth=2.4, constraint=false];
    S10 -> S12 [color="#e53e3e", penwidth=2.4, constraint=false];
    S12 -> H3  [color="#e53e3e", penwidth=2.4, constraint=false];

    // F2: 2 -> 4, path 2 -> 9 -> 10 -> 11 -> 4
    H2  -> S9  [color="#805ad5", penwidth=2.4, constraint=false, label="F2"];
    S9  -> S10 [color="#805ad5", penwidth=2.4, constraint=false];
    S10 -> S11 [color="#805ad5", penwidth=2.4, constraint=false];
    S11 -> H4  [color="#805ad5", penwidth=2.4, constraint=false];

    // F3: 5 -> 3, path 5 -> 12 -> 3
    H5  -> S12 [color="#38a169", penwidth=2.4, constraint=false, label="F3"];
    S12 -> H3  [color="#38a169", penwidth=2.4, constraint=false];

    // F4: 6 -> 3, path 6 -> 12 -> 3
    H6  -> S12 [color="#d69e2e", penwidth=2.4, constraint=false, label="F4"];
    S12 -> H3  [color="#d69e2e", penwidth=2.4, constraint=false];

    // F5: 7 -> 3, path 7 -> 12 -> 3
    H7  -> S12 [color="#00b5d8", penwidth=2.4, constraint=false, label="F5"];
    S12 -> H3  [color="#00b5d8", penwidth=2.4, constraint=false];

    // F6: 8 -> 3, path 8 -> 12 -> 3
    H8  -> S12 [color="#ed8936", penwidth=2.4, constraint=false, label="F6"];
    S12 -> H3  [color="#ed8936", penwidth=2.4, constraint=false];
}
